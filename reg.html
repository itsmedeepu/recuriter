<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User-Registration</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/toast/toastify.min.css" />

    <script type="text/javascript" src="assets/toast/toastify-js.js"></script>

    <script src="assets/js/jquery.js"></script>

    <style>
      #refresh:hover {
        cursor: pointer;
      }
      label {
        font-weight: bolder;
      }
      body {
        background: linear-gradient(135deg, #6b73ff, #000dff);
      }
    </style>
  </head>
  <body>
    <div class="container main-container">
      <div class="row">
        <div class="col-lg-6 col-md-5 col-sm-12 m-auto">
          <div class="card shadow rounded-3">
            <div class="header">
              <h2 class="text-center header-text">Registration Page</h2>
            </div>
            <div class="card-body">
              <form
                role="form"
                class="row g-4"
                id="regform"
                enctype="multipart/form-data"
                method="post"
              >
                <div class="col-md-6">
                  <label for="fname" class="form-label">First Name</label>
                  <input
                    type="text"
                    class="form-control"
                    id="fname"
                    name="fname"
                    placeholder="Enter Firstname"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="inputlastname" class="form-label"
                    >Last Name</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="lname"
                    name="lname"
                    placeholder="Enter Lastname"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="inputAddress" class="form-label">Email</label>
                  <input
                    type="email"
                    class="form-control"
                    id="email"
                    name="email"
                    placeholder="Enter Email"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="inputAddress" class="form-label">Phone</label>
                  <input
                    type="text"
                    class="form-control"
                    id="phone"
                    name="phone"
                    placeholder="Phone Number"
                    maxlength="10"
                    required
                  />
                </div>

                <div class="col-auto">
                  Select Gender
                  <div class="form-check form-check-inline ms-3">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="gender"
                      value="Male"
                      required
                    />
                    <label class="form-check-label" for="inlineRadio1"
                      >Male</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="gender"
                      value="Female"
                      required
                    />
                    <label class="form-check-label" for="inlineRadio2"
                      >Female</label
                    >
                  </div>
                  <div class="form-check form-check-inline">
                    <input
                      class="form-check-input"
                      type="radio"
                      name="gender"
                      value="Others"
                      required
                    />
                    <label class="form-check-label" for="inlineRadio3"
                      >Others</label
                    >
                  </div>
                </div>

                <div class="col-12">
                  <label for="inputAddress1" class="form-label"
                    >Address 1</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    name="address"
                    id="address"
                    placeholder="Country, state,District"
                    required
                  />
                </div>
                <div class="col-12">
                  <label class="form-label"
                    >Upload Resume(format .pdf less than 2mb)</label
                  >
                  <input
                    type="file"
                    class="form-control"
                    name="resume"
                    id="resume"
                    required
                  />
                </div>
                <div class="col-6 col-lg-6">
                  <img
                    id="captcha_img"
                    src="assets/captcha/captcha.php"
                  />&nbsp;&nbsp;&nbsp;&nbsp;<span
                    ><img
                      id="refresh"
                      src="assets/images/re.png"
                      width="30px"
                      height="30px"
                  /></span>
                </div>
                <div class="col-6 col-lg-6">
                  <label class="form-label">Captcha</label>

                  <input
                    type="text"
                    class="form-control"
                    name="captcha"
                    id="captcha"
                    placeholder="Enter Captcha"
                    required
                  />
                </div>
                <div class="col-6 col-lg-6">
                  <label class="form-label">Create Password</label>

                  <input
                    type="password"
                    class="form-control"
                    name="pass"
                    id="pass"
                    placeholder="Enter password"
                    required
                  />
                </div>
                <div class="col-6 col-lg-6">
                  <label class="form-label">Confirm Password</label>

                  <input
                    type="password"
                    class="form-control"
                    name="cpass"
                    id="cpass"
                    placeholder="Confirm password"
                    required
                  />
                  <span class="error" style="color: red"></span>
                </div>
                <div class="col-12">
                  <input
                    type="submit"
                    class="btn btn-primary"
                    name="Register"
                    id="submit"
                    value="Register"
                  />
                  <button
                    type="reset"
                    style="float: right"
                    class="btn btn-primary"
                  >
                    Clear
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      $(document).ready(function () {
        $("#submit").click(function (e) {
          e.preventDefault();
          var fname = $("#fname").val();
          var lname = $("#lname").val();
          var email = $("#email").val();
          var phone = $("#phone").val();
          // var gender = $("input[name=gender]:checked").val();
          var pass = $("#pass").val();
          var address = $("#address").val();
          var cpass = $("#cpass").val();
          var captcha = $("#captcha").val();
          var resume = $("#resume").val();

          if (fname == "") {
            alert("Please Enter First Name");
            $("#fname").focus();
            return false;
          }
          if (lname == "") {
            alert("Please Enter Last Name");
            $("#lname").focus();
            return false;
          }
          if (email == "") {
            alert("Please Enter Email");
            $("#email").focus();
            return false;
          }
          if (phone == "") {
            alert("Please Enter Phone Number");
            $("#phone").focus();
            return false;
          }

          if ($('input[name="gender"]:checked').length == 0) {
            alert("Please select gender");
            return false;
          }

          if (address == "") {
            alert("Please Enter address");
            $("#address").focus();
            return false;
          }
          if (resume == "") {
            alert("Please upload resume");
            $("#resume").focus();
            return false;
          }
          if (captcha == "") {
            alert("Please Enter captcha");
            $("#captcha").focus();
            return false;
          }

          if (pass == "") {
            alert("Please Enter Password");
            $("#pass").focus();
            return false;
          }
          if (cpass == "") {
            alert("Please Enter Confirm Password");
            $("#pass").focus();
            return false;
          }
          if (cpass != pass) {
            alert("Password and confirm password not matching ");
            $("#cpass").focus();
            return false;
          }

          var resumev = $("#resume")[0].files[0].size;
          if (resumev > 2097152) {
            alert("Please upload file size below 2mb");
            $("#resume").focus();
            return false;
          } else {
            var form = $("#regform")[0];
            var formData = new FormData(form);
            // var formdata = $("#regform").serialize();
            $.ajax({
              url: "validation.php",
              type: "POST",
              processData: false,
              contentType: false,
              data: formData,
              success: function (response) {
                //alert(response);

                if (response == 1) {
                  // alert("Enter correct captcha code");
                  Toastify({
                    text: "Enter Correct Captcha Code",
                    duration: 4000,
                    gravity: "top",
                    close: true,
                    position: "right",
                    stopOnFocus: true,
                    style: {
                      background: "linear-gradient(to right, #df1b1b, #df1b1b)",
                    },
                  }).showToast();
                } else if (response == 2) {
                  Toastify({
                    text: "User already exits with same email and phone number, Kindly login",
                    duration: 4000,
                    gravity: "top",
                    close: true,
                    position: "right",
                    stopOnFocus: true,
                    style: {
                      background: "linear-gradient(to right, #FE7C22, #96c93d)",
                    },
                  }).showToast();
                } else {
                  Toastify({
                    text: "Registered Successfully Kindly Login",
                    duration: 4000,
                    gravity: "top",
                    close: true,
                    position: "right",
                    stopOnFocus: true,
                    style: {
                      background: "linear-gradient(to right, #00b09b, #96c93d)",
                    },
                  }).showToast();
                }
              },
            });
          }
        });

        /** code for refresh captcha**/

        $("#refresh").click(function () {
          $("#captcha_img").attr("src", "assets/captcha/captcha.php");
          return false;
        });

        //confirm password check

        $("#cpass").keyup(function () {
          var pass = $("#pass").val();
          var cpass = $("#cpass").val();
          if (cpass != pass) {
            $(".error").html("Password not match");
          } else {
            $(".error").html("");
          }
        });
      });
    </script>
  </body>
</html>
